schema: '2.0'
stages:
  setup:
    cmd: python -m attention
    deps:
    - path: attention.py
      hash: md5
      md5: 74b2e2a320851cb226cff913f20a763f
      size: 9729
    params:
      params.yaml:
        model:
          num_heads: 4
          num_layers: 2
          emb_dim: 8
          mlp_dim: 8
          seq_len: 10
          bits: 4
          mask: const
    outs:
    - path: attention.onnx
      hash: md5
      md5: 630d97d6157af9730e83211e4081bfce
      size: 42134
    - path: inp.npy
      hash: md5
      md5: 3d0ac444ea29b09517aa04f113dd88c9
      size: 448
    - path: out.npy
      hash: md5
      md5: d0a5b00cae67c4337cfe193d81c64a0d
      size: 448
  build:
    cmd: $FINN/run-docker.sh build_custom $(pwd)
    deps:
    - path: attention.onnx
      hash: md5
      md5: 630d97d6157af9730e83211e4081bfce
      size: 42134
    - path: build.py
      hash: md5
      md5: ca56be5a5f744841a7ebe94effbf8e73
      size: 4684
    - path: inp.npy
      hash: md5
      md5: 3d0ac444ea29b09517aa04f113dd88c9
      size: 448
    - path: out.npy
      hash: md5
      md5: d0a5b00cae67c4337cfe193d81c64a0d
      size: 448
    params:
      params.yaml:
        build:
          output_dir: build
          synth_clk_period_ns: 10.0
          board: RFSoC2x2
          stop_step: step_hls_ipgen
    outs:
    - path: build/
      hash: md5
      md5: af5e8dc714daaefd7f043705e9ff2751.dir
      size: 884365
      nfiles: 31
  metrics:
    cmd: python -m metrics
    deps:
    - path: build/
      hash: md5
      md5: af5e8dc714daaefd7f043705e9ff2751.dir
      size: 884365
      nfiles: 31
    - path: metrics.py
      hash: md5
      md5: c816cb36bd1f090576153c9d634f4889
      size: 662
    params:
      params.yaml:
        build.output_dir: build
    outs:
    - path: metrics.yaml
      hash: md5
      md5: 6ac65b5ee7aa003ccc83fc5339354dc3
      size: 61
