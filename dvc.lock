schema: '2.0'
stages:
  setup:
    cmd: python -m attention
    deps:
    - path: attention.py
      hash: md5
      md5: 858b164bc1bfb252f1d3db751280a326
      size: 12911
    params:
      params.yaml:
        model:
          num_heads: 4
          num_layers: 1
          bias: true
          emb_dim: 8
          mlp_dim: 32
          seq_len: 16
          bits: 4
          mask: causal
    outs:
    - path: attention.onnx
      hash: md5
      md5: e6a76dbfc684159426a49392b999da4a
      size: 28545
    - path: inp.npy
      hash: md5
      md5: dde1baa101ef5626ae4f95ff78c854fc
      size: 640
    - path: out.npy
      hash: md5
      md5: b3780cf1804978c7c1247d6d17b9a87e
      size: 640
  build:
    cmd: $FINN/run-docker.sh build_custom $(pwd)
    deps:
    - path: attention.onnx
      hash: md5
      md5: e6a76dbfc684159426a49392b999da4a
      size: 28545
    - path: build.py
      hash: md5
      md5: 5f5ccafb7855e5404a88e551227bd447
      size: 5350
    - path: build_steps.py
      hash: md5
      md5: b883995d957b9dbb5997260fcb7e16d1
      size: 6978
    - path: folding.json
      hash: md5
      md5: 7e701e792b6e3c54e76881ed81d82844
      size: 1239
    - path: inp.npy
      hash: md5
      md5: dde1baa101ef5626ae4f95ff78c854fc
      size: 640
    - path: out.npy
      hash: md5
      md5: b3780cf1804978c7c1247d6d17b9a87e
      size: 640
    - path: transformation/
      hash: md5
      md5: 46f5f2f34e213067669135ba503b646f.dir
      size: 115166
      nfiles: 14
    params:
      params.yaml:
        build:
          output_dir: build
          synth_clk_period_ns: 10.0
          board: RFSoC2x2
          folding_config_file: folding.json
    outs:
    - path: build/
      hash: md5
      md5: a0493006b7884fba7c29d48e19742f82.dir
      size: 93585087
      nfiles: 1523
  metrics:
    cmd: python -m metrics
    deps:
    - path: build/
      hash: md5
      md5: a0493006b7884fba7c29d48e19742f82.dir
      size: 93585087
      nfiles: 1523
    - path: build/report/post_synth_resources.json
      hash: md5
      md5: 6610c3e60aef70de16d908b8046db086
      size: 11433
    - path: metrics.py
      hash: md5
      md5: 027dcb70a77c34f84948bc3d5ee2107f
      size: 932
    params:
      params.yaml:
        build.output_dir: build
        metrics:
          report: build/report/post_synth_resources.json
          filter: (top)
    outs:
    - path: metrics.yaml
      hash: md5
      md5: 0326a4167a41a8e3292f9cb13671dca7
      size: 65
