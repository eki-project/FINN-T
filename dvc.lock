schema: '2.0'
stages:
  setup:
    cmd: python -m attention
    deps:
    - path: attention.py
      hash: md5
      md5: 57093f211f1702e2ecd0f3896c656498
      size: 11272
    params:
      params.yaml:
        model:
          num_heads: 8
          num_layers: 1
          bias: true
          emb_dim: 48
          mlp_dim: 192
          seq_len: 64
          bits: 4
          mask: causal
    outs:
    - path: attention.onnx
      hash: md5
      md5: 6d4dc4aa84789cfc696f816fd5cbca65
      size: 152943
    - path: inp.npy
      hash: md5
      md5: 9474a47ca5161a2154f9166b075e292e
      size: 12416
    - path: out.npy
      hash: md5
      md5: 1914436738e8c32cd21113ef72b4cf24
      size: 12416
  build:
    cmd: $FINN/run-docker.sh build_custom $(pwd)
    deps:
    - path: attention.onnx
      hash: md5
      md5: 6d4dc4aa84789cfc696f816fd5cbca65
      size: 152943
    - path: build.py
      hash: md5
      md5: ca56be5a5f744841a7ebe94effbf8e73
      size: 4684
    - path: inp.npy
      hash: md5
      md5: 9474a47ca5161a2154f9166b075e292e
      size: 12416
    - path: out.npy
      hash: md5
      md5: 1914436738e8c32cd21113ef72b4cf24
      size: 12416
    params:
      params.yaml:
        build:
          output_dir: build
          synth_clk_period_ns: 10.0
          board: RFSoC2x2
    outs:
    - path: build/
      hash: md5
      md5: c53bb30be2bb97d6b534a5221a374908.dir
      size: 102561770
      nfiles: 2056
  metrics:
    cmd: python -m metrics
    deps:
    - path: build/
      hash: md5
      md5: c53bb30be2bb97d6b534a5221a374908.dir
      size: 102561770
      nfiles: 2056
    - path: metrics.py
      hash: md5
      md5: 027dcb70a77c34f84948bc3d5ee2107f
      size: 932
    params:
      params.yaml:
        build.output_dir: build
        metrics:
          report: build/report/post_synth_resources.json
          filter: (top)
    outs:
    - path: metrics.yaml
      hash: md5
      md5: c50ce0ec4225b4ae3cb321dfd520a16f
      size: 68
