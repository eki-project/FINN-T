schema: '2.0'
stages:
  setup:
    cmd: python -m attention
    deps:
    - path: attention.py
      hash: md5
      md5: 3fa28553a44bca5080eb1c1404059d73
      size: 12910
    params:
      params.yaml:
        model:
          num_heads: 12
          num_layers: 1
          bias: true
          emb_dim: 768
          mlp_dim: 3072
          seq_len: 64
          bits: 4
          mask: causal
    outs:
    - path: attention.onnx
      hash: md5
      md5: e4e1a63bca1f1db15e0e5382d57efbaf
      size: 28370675
    - path: inp.npy
      hash: md5
      md5: 31528e14160b6ac523e2d58c3089cccf
      size: 196736
    - path: out.npy
      hash: md5
      md5: 127d8ecba644252809e69d7fa68ce5b8
      size: 196736
  build:
    cmd: $FINN/run-docker.sh build_custom $(pwd)
    deps:
    - path: attention.onnx
      hash: md5
      md5: e4e1a63bca1f1db15e0e5382d57efbaf
      size: 28370675
    - path: build.py
      hash: md5
      md5: 5f5ccafb7855e5404a88e551227bd447
      size: 5350
    - path: build_steps.py
      hash: md5
      md5: c89692c5389f5002596cf9d23adf0c5d
      size: 7218
    - path: folding.json
      hash: md5
      md5: 73befad6f8474e3acb53375dc4e4788b
      size: 1265
    - path: inp.npy
      hash: md5
      md5: 31528e14160b6ac523e2d58c3089cccf
      size: 196736
    - path: out.npy
      hash: md5
      md5: 127d8ecba644252809e69d7fa68ce5b8
      size: 196736
    - path: transformation/
      hash: md5
      md5: 2061cf32e553348ecbd3b6e372d78e02.dir
      size: 121922
      nfiles: 14
    params:
      params.yaml:
        build:
          output_dir: build
          synth_clk_period_ns: 10.0
          board: RFSoC2x2
          folding_config_file: folding.json
          stop_step: step_hls_ipgen
    outs:
    - path: build/
      hash: md5
      md5: ba8ccf26d39c5c290d0ad508507b2377.dir
      size: 586923409
      nfiles: 33
  metrics:
    cmd: python -m metrics
    deps:
    - path: build/
      hash: md5
      md5: ba8ccf26d39c5c290d0ad508507b2377.dir
      size: 586923409
      nfiles: 33
    - path: build/report/estimate_layer_resources_hls.json
      hash: md5
      md5: 48a90f4d1c89df6870cd930d8fd0e238
      size: 4079
    - path: metrics.py
      hash: md5
      md5: 027dcb70a77c34f84948bc3d5ee2107f
      size: 932
    params:
      params.yaml:
        build.output_dir: build
        metrics:
          report: build/report/estimate_layer_resources_hls.json
          filter: .*
    outs:
    - path: metrics.yaml
      hash: md5
      md5: b4f4af5863a7c7cb4a35c474e7101c0c
      size: 66
