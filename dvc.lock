schema: '2.0'
stages:
  setup:
    cmd: python -m attention
    deps:
    - path: attention.py
      hash: md5
      md5: 858b164bc1bfb252f1d3db751280a326
      size: 12911
    params:
      params.yaml:
        model:
          num_heads: 4
          num_layers: 1
          bias: true
          emb_dim: 8
          mlp_dim: 24
          seq_len: 16
          bits: 4
          mask: causal
    outs:
    - path: attention.onnx
      hash: md5
      md5: 3ee63130d5beba834bbb60fc6200ff98
      size: 27999
    - path: inp.npy
      hash: md5
      md5: e9f2f0c683b7ff1bd9032a923906c641
      size: 640
    - path: out.npy
      hash: md5
      md5: 4d6cadcca954cf04ead1ac1e62a2638a
      size: 640
  build:
    cmd: $FINN/run-docker.sh build_custom $(pwd)
    deps:
    - path: attention.onnx
      hash: md5
      md5: 3ee63130d5beba834bbb60fc6200ff98
      size: 27999
    - path: build.py
      hash: md5
      md5: d10a2f81f29d3e0823ac29f09a690cd0
      size: 4828
    - path: inp.npy
      hash: md5
      md5: e9f2f0c683b7ff1bd9032a923906c641
      size: 640
    - path: out.npy
      hash: md5
      md5: 4d6cadcca954cf04ead1ac1e62a2638a
      size: 640
    params:
      params.yaml:
        build:
          output_dir: build
          synth_clk_period_ns: 10.0
          board: RFSoC2x2
    outs:
    - path: build/
      hash: md5
      md5: a2ce1f7e6e12c8f9dea9a7c568314ee5.dir
      size: 91376440
      nfiles: 1299
  metrics:
    cmd: python -m metrics
    deps:
    - path: build/
      hash: md5
      md5: a2ce1f7e6e12c8f9dea9a7c568314ee5.dir
      size: 91376440
      nfiles: 1299
    - path: metrics.py
      hash: md5
      md5: 027dcb70a77c34f84948bc3d5ee2107f
      size: 932
    params:
      params.yaml:
        build.output_dir: build
        metrics:
          report: build/report/post_synth_resources.json
          filter: (top)
    outs:
    - path: metrics.yaml
      hash: md5
      md5: 96e571dfe6fcf661bf1e0972c028d6ae
      size: 65
