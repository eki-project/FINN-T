schema: '2.0'
stages:
  setup:
    cmd: python -m attention
    deps:
    - path: attention.py
      hash: md5
      md5: 7af3f85889f9df41d420fc3966151514
      size: 11222
    params:
      params.yaml:
        model:
          num_heads: 8
          num_layers: 1
          emb_dim: 48
          mlp_dim: 192
          seq_len: 64
          bits: 4
          mask: causal
    outs:
    - path: attention.onnx
      hash: md5
      md5: 9d4a72ab0bd30d123f618cb3b60824f0
      size: 146523
    - path: inp.npy
      hash: md5
      md5: 1340167c447865ca7076b93d99d9320a
      size: 12416
    - path: out.npy
      hash: md5
      md5: 859d52dc55141b0bd47671f340f7c23a
      size: 12416
  build:
    cmd: $FINN/run-docker.sh build_custom $(pwd)
    deps:
    - path: attention.onnx
      hash: md5
      md5: 9d4a72ab0bd30d123f618cb3b60824f0
      size: 146523
    - path: build.py
      hash: md5
      md5: ca56be5a5f744841a7ebe94effbf8e73
      size: 4684
    - path: inp.npy
      hash: md5
      md5: 1340167c447865ca7076b93d99d9320a
      size: 12416
    - path: out.npy
      hash: md5
      md5: 859d52dc55141b0bd47671f340f7c23a
      size: 12416
    params:
      params.yaml:
        build:
          output_dir: build
          synth_clk_period_ns: 10.0
          board: RFSoC2x2
          stop_step: step_hls_ipgen
    outs:
    - path: build/
      hash: md5
      md5: 48de91b111891760716a6154be628853.dir
      size: 4672064
      nfiles: 32
  metrics:
    cmd: python -m metrics
    deps:
    - path: build/
      hash: md5
      md5: 48de91b111891760716a6154be628853.dir
      size: 4672064
      nfiles: 32
    - path: metrics.py
      hash: md5
      md5: c816cb36bd1f090576153c9d634f4889
      size: 662
    params:
      params.yaml:
        build.output_dir: build
    outs:
    - path: metrics.yaml
      hash: md5
      md5: 044af7f0d703e70eafb44a5db8bb6b5c
      size: 62
