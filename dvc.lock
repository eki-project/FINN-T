schema: '2.0'
stages:
  setup:
    cmd: bash run.sh python -m attention
    deps:
    - path: attention.py
      hash: md5
      md5: 3fa28553a44bca5080eb1c1404059d73
      size: 12910
    - path: noctua.sh
      hash: md5
      md5: 6a50a9c09aceca7ca860dfc51689aff6
      size: 1832
    - path: run.sh
      hash: md5
      md5: 33879adf4363fd1b49d1455789f87d4b
      size: 1586
    params:
      params.yaml:
        model:
          num_heads: 1
          num_layers: 1
          bias: true
          emb_dim: 8
          mlp_dim: 256
          seq_len: 32
          bits: 4
          mask: none
    outs:
    - path: attention.onnx
      hash: md5
      md5: 33c69f8a78ac48f4d149fcd10a8e267e
      size: 42429
    - path: inp.npy
      hash: md5
      md5: 791c2aa7ccc287182b03fafe8c5aeef4
      size: 1152
    - path: out.npy
      hash: md5
      md5: 76d38b10f80aac70d94e30bd5c3a2196
      size: 1152
  build:
    cmd: bash run.sh '$FINN/run-docker.sh build_custom $(pwd)'
    deps:
    - path: attention.onnx
      hash: md5
      md5: 33c69f8a78ac48f4d149fcd10a8e267e
      size: 42429
    - path: build.py
      hash: md5
      md5: a8768396c680fac2968cdd8962603b56
      size: 5491
    - path: build_steps.py
      hash: md5
      md5: a0408cfbaac1516d79b45e8423da42f9
      size: 8554
    - path: inp.npy
      hash: md5
      md5: 791c2aa7ccc287182b03fafe8c5aeef4
      size: 1152
    - path: noctua.sh
      hash: md5
      md5: 6a50a9c09aceca7ca860dfc51689aff6
      size: 1832
    - path: out.npy
      hash: md5
      md5: 76d38b10f80aac70d94e30bd5c3a2196
      size: 1152
    - path: run.sh
      hash: md5
      md5: 33879adf4363fd1b49d1455789f87d4b
      size: 1586
    - path: transformation/
      hash: md5
      md5: 92ccbfeea4bfbf104b3f0487ce23ffe2.dir
      size: 133987
      nfiles: 16
    params:
      params.yaml:
        build:
          output_dir: build
          synth_clk_period_ns: 10.0
          board: RFSoC2x2
          folding_config_file: folding.json
      folding.json:
        AddStreams_Batch_0:
          PE: 1
          inFIFODepths:
          - 256
          - 256
          outFIFODepths:
          - 2
        AddStreams_Batch_1:
          PE: 1
          inFIFODepths:
          - 256
          - 256
          outFIFODepths:
          - 2
        Defaults:
          outFIFODepths:
          - - 2
            - 2
            - 2
            - 2
          - all
          inFIFODepths:
          - - 2
            - 2
            - 2
            - 2
          - all
          SIMD:
          - 8
          - - MatrixVectorActivation
          PE:
          - 8
          - - MatrixVectorActivation
          SeqFold:
          - 32
          - - ScaledDotProductAttention
          EmbFold:
          - 1
          - - ScaledDotProductAttention
          ram_style:
          - block
          - - StreamingFIFO
            - MatrixVectorActivation
        ScaledDotProductAttention_0:
          inFIFODepths:
          - 256
          - 256
          - 256
          outFIFODepths:
          - 256
        ScaledDotProductAttention_1:
          inFIFODepths:
          - 256
          - 256
          - 256
          outFIFODepths:
          - 256
        ScaledDotProductAttention_2:
          inFIFODepths:
          - 256
          - 256
          - 256
          outFIFODepths:
          - 256
        ScaledDotProductAttention_3:
          inFIFODepths:
          - 256
          - 256
          - 256
          outFIFODepths:
          - 256
        Thresholding_Batch_0:
          PE: 1
        Thresholding_Batch_1:
          PE: 1
    outs:
    - path: build/
      hash: md5
      md5: 7132bb6c1ec60fb2b19a71bb4e88513c.dir
      size: 89414847
      nfiles: 1077
  metrics:
    cmd: bash run.sh python -m metrics
    deps:
    - path: build/
      hash: md5
      md5: 7132bb6c1ec60fb2b19a71bb4e88513c.dir
      size: 89414847
      nfiles: 1077
    - path: build/report/post_synth_resources.json
      hash: md5
      md5: ed008cbc0761fcfb7cae5036e6a92c67
      size: 8555
    - path: metrics.py
      hash: md5
      md5: 027dcb70a77c34f84948bc3d5ee2107f
      size: 932
    - path: noctua.sh
      hash: md5
      md5: 6a50a9c09aceca7ca860dfc51689aff6
      size: 1832
    - path: run.sh
      hash: md5
      md5: 33879adf4363fd1b49d1455789f87d4b
      size: 1586
    params:
      params.yaml:
        build.output_dir: build
        metrics:
          report: build/report/post_synth_resources.json
          filter: (top)
    outs:
    - path: metrics.yaml
      hash: md5
      md5: ce931c692362af2684431c9c91847f89
      size: 72
